<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<!-- For Mobile Devices -->
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<title>Boost.SIMD: Introduction</title>
<!--<link href="tabs.css" rel="stylesheet" type="text/css"/>-->
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href='https://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="doxy-boot.js"></script>
</head>
<body>
<nav class="navbar navbar-default" role="navigation">
<div class="container">
<div class="navbar-header responsive-logo">
<a class="navbar-brand" style="width: 10%" href="https://github.com/NumScale/boost.simd">Boost.SIMD </a>
<a href="http://numscale.implicitweb.fr/" title="Numscale" style="display: block; width: 25%; text-align: right; float: right"><img src="numscale.png" alt="Numscale" style="width:100%; padding-top: 10px; padding-bottom: 10px; " align="right"></a>
</div>
</div>
</nav>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div class="content" id="content">
<div class="container">
<div class="row">
<div class="col-sm-12 panel " style="padding-bottom: 35px;">
<div style="margin-bottom: 15px;">
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Home</span></a></li>
      <li><a href="QuickStart.html"><span>Quick&#160;Start</span></a></li>
      <li><a href="tutorials.html"><span>Tutorials</span></a></li>
      <li><a href="modules.html"><span>Reference&#160;documentation</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Introduction </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#main-what">What is SIMD?</a></li>
<li class="level1"><a href="#main-why">Why use Boost.SIMD?</a></li>
<li class="level1"><a href="#main-support">Supported Compilers and Hardware</a></li>
</ul>
</div>
<div class="textblock"><p>Welcome to the world of portable, hassle free SIMD programming! <b>Boost.SIMD</b> was developed to simplify the difficult, tedious and often error-prone process of developing SIMD programs. <b>Boost.SIMD</b> is designed to seamlessly integrate into existing projects so that you can quickly and easily start developing high performance, portable and future proof software.</p>
<h1><a class="anchor" id="main-what"></a>
What is SIMD?</h1>
<hr/>
<p>Single instruction, multiple data (<b>SIMD</b>) instructions or <b>multimedia extensions</b> have been available for many years. They are designed to significantly accelerate code execution, however they require expertise to be used correctly and they depend on potentially fragile compiler support and the use of low-level intrinsics, or vendor-specific libraries. The introduction of these instruction sets has allowed developers to exploit the latent data parallelism available in applications by executing a given instruction simultaneously on multiple data stored in dedicated cpu registers. The SIMD unit is built as an independent computation unit in the processor, it comes in addition to the regular computation unit complete with a special register file, dispatching and pipelining unit.</p>
<h1><a class="anchor" id="main-why"></a>
Why use Boost.SIMD?</h1>
<hr/>
<p>Whether you are a first time SIMD programmer or an experienced team leader, <b>Boost.SIMD</b> can make your life and that of your team easier as the use of SIMD instructions requires developers to program into a very verbose manner due to the low-level nature of SIMD instruction sets. Furthermore, it is necessary to re-write code for each revision of each target architecture, accounting for each architecture's vendor provided API as well as architecture dependent implementation details. This greatly complicates the design and maintenance of SIMD code, significantly increasing the time required to develop, test and deploy software as well as increasing the scope for introducing bugs.</p>
<p>For example, take this simple case where we calculate the sum of two vectors of <code>32-bit float</code> vectors:</p>
<div class="fragment"><div class="line">  <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; size; ++i){</div><div class="line">    res[i] = data0[i] + data1[i];</div><div class="line">  }</div></div><!-- fragment --><p> Each element of the results vector is independent of every other element - therefore this function may easily be vectorized as there is latent data parallelism which may be exploited. This simple loop may be vectorized for an x86 processor using Intel intrinsic functions. For example, the following code vectorizes this loop for an <code>SSE</code> enabled processor:</p>
<div class="fragment"><div class="line">  __m128 v0_sse, v1_sse, r_sse;</div><div class="line">  std::size_t f_card_sse = 4;</div><div class="line">  <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; size; i += f_card_sse){</div><div class="line">    v0_sse = _mm_loadu_ps(&amp;data0[i]);</div><div class="line">    v1_sse = _mm_loadu_ps(&amp;data1[i]);</div><div class="line">    r_sse  = _mm_add_ps(v0_sse, v1_sse);</div><div class="line">    _mm_storeu_ps(&amp;res[i], r_sse);</div><div class="line">  }</div></div><!-- fragment --><p> Looks difficult? How abut we vectorize it for the following generation of Intel processor equipped with <code>AVX</code> instructions:</p>
<div class="fragment"><div class="line">  __m256 v0_avx, v1_avx, r_avx;</div><div class="line">  std::size_t f_card_avx = 8;</div><div class="line">  <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; size; i += f_card_avx){</div><div class="line">    v0_avx = _mm256_loadu_ps(&amp;data0[i]);</div><div class="line">    v1_avx = _mm256_loadu_ps(&amp;data1[i]);</div><div class="line">    r_avx  = _mm256_add_ps(v0_avx, v1_avx);</div><div class="line">    _mm256_storeu_ps(&amp;res[i], r_avx);</div><div class="line">  }</div></div><!-- fragment --><p> Both of these processor are manufactured by Intel yet two different versions of the code are required to get the best performance possible from the processors. Imagine the complication of moving to another manufacturer's processor, for example IBM. Let's try re-write this same simple loop for a <code>VMX</code> equipped processor:</p>
<div class="fragment"><div class="line">  float32x4_t v0_ibm, v1_ibm, r_ibm;</div><div class="line">  std::size_t f_card_ibm = 4;</div><div class="line">  <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; size; i += f_card_ibm){</div><div class="line">    v0_ibm = vec_ld(i, &amp;data0[0]);</div><div class="line">    v1_ibm = vec_ld(i, &amp;data1[0]);</div><div class="line">    r_ibm  = vec_add(v0_ibm, v1_ibm);</div><div class="line">    vec_st(r_ibm, i, &amp;res[0]);</div><div class="line">  }</div></div><!-- fragment --><p> This is quicky getting complicated and annoying. Wouldn't life be much easier if someone else took care of this mess? Imagine being able to write one version of your code, which has optimal performance across all architectures, compilers and operating systems? Imagine not having to worry about re-writing your code for each new processor released? Well, imagine no more and behold the beauty and simplicity of <b>Boost.SIMD</b>!</p>
<div class="fragment"><div class="line">  <span class="keyword">namespace </span><a class="code" href="namespaceboost_1_1simd.html">bs</a> = <a class="code" href="namespaceboost_1_1simd.html">boost::simd</a>;</div><div class="line">  <span class="keyword">using</span> pack_f = <a class="code" href="classboost_1_1simd_1_1pack.html">bs::pack&lt;float&gt;</a>;</div><div class="line"></div><div class="line">  pack_f v0, v1, r;</div><div class="line">  <span class="keywordtype">size_t</span> card = <a class="code" href="structboost_1_1simd_1_1cardinal__of.html">bs::cardinal_of&lt;pack_f&gt;</a>();</div><div class="line">  <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; size; i += card){</div><div class="line">    v0 = bs::load&lt;pack_f&gt;(&amp;data0[i]);</div><div class="line">    v1 = bs::load&lt;pack_f&gt;(&amp;data1[i]);</div><div class="line">    r  = <a class="code" href="group__group-operator_gab7d2f36a67787bac4c1b2cfd05ba2b47.html#gab7d2f36a67787bac4c1b2cfd05ba2b47">bs::plus</a>(v0, v1);</div><div class="line">    <a class="code" href="namespaceboost_1_1simd_af5521b79da254d7133fa74cfaf547e10.html#af5521b79da254d7133fa74cfaf547e10">bs::store</a>(r, &amp;res[i]);</div><div class="line">  }</div></div><!-- fragment --><p> <b>Boost.SIMD</b> is designed to be user-friendly, easy to integrate into existing projects. To achieve this, <b>Boost.SIMD</b> harnesses the latest innovations in the C++ language, but is still easy to use with an intuitive interface. To make life even easier for you, we have included lots of commonly used functions and constants directly in <b>Boost.SIMD</b>, standardizing the use of common <em>SIMD</em> programming idioms. And because we are nice people, we have thoroughly tested <b>Boost.SIMD</b> across different architectures, compilers and operating systems, so we have even included work-arounds for all known compiler bugs!</p>
<p><b>Boost.SIMD</b> allows you to focus on the important part of your work: the development of new features and functionality. We take care of all of the architecture and compiler specific details and we provide updates when new architectures are released by manufacturers. All you have to do is re-compile your code every time you target a new architecture!</p>
<p><b>Boost.SIMD</b> provides the following:</p>
<ul>
<li>a proper value semantic wrapper for <em>SIMD</em> registers;</li>
<li>an automatic system to detect and exploit architecture specific optimization opportunities;</li>
<li>standard compliant iterators to iterate over contiguous range of data in a <em>SIMD</em> compatible way;</li>
<li>standard compliant iterators encapsulating complex <em>SIMD</em> idioms like sliding window or de-interleaving of data on the fly.</li>
</ul>
<h1><a class="anchor" id="main-support"></a>
Supported Compilers and Hardware</h1>
<hr/>
<p> The open-source version of <b>Boost.SIMD</b> includes support for some x86 and VMX processors. Optional modules with support for additional architectures are also available. The following SIMD extensions are supported by <b>Boost.SIMD</b>:</p>
<center> <table class="doxtable">
<tr>
<th>Architecture </th><th>Extensions  </th></tr>
<tr>
<td>x86 </td><td>SSE2, SSE3, SSSE3, SSE4.1, SSE4.2, AVX, FMA3, AVX2 </td></tr>
<tr>
<td>PowerPC </td><td>VMX </td></tr>
</table>
</center><p><b>Boost.SIMD</b> requires a C++11 compliant compiler and is thoroughly tested on the following compilers:</p>
<center> <table class="doxtable">
<tr>
<th>Compiler </th><th>Version  </th></tr>
<tr>
<td>g++ </td><td>4.8 and above </td></tr>
<tr>
<td>clang++ </td><td>3.5 and above </td></tr>
<tr>
<td>Microsoft Visual Studio </td><td>15.0 and above </td></tr>
</table>
</center><p><b>Boost.SIMD</b> requires <b>Boost</b> version 1.60 or newer. </p><hr/>
 </div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</div>
</div>
</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>
Generated on Fri Aug 12 2016 20:02:37 for Boost.SIMD by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
